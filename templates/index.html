<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rachel's Personal Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #FDF8F5; /* Soft beige background */
            color: #5C4B4B;
        }
        .nav-link {
            transition: color 0.3s ease;
        }
        .nav-link:hover {
            color: #D5B4B4; /* Muted blush pink for hover */
        }
        .chat-container {
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            background-color: #F5EBE0; /* Cream main container */
        }
        .user-msg {
            background-color: #E3D1D1; /* Blush pink for user */
            color: #5C4B4B;
        }
        .bot-msg {
            background-color: #FEFCF3; /* Off-white for bot */
            color: #6B6B6B;
        }
        .input-area {
            background-color: #EADFD7; /* Slightly darker beige */
        }
        .send-btn {
            background-color: #D5B4B4; /* Muted blush pink for button */
            transition: background-color 0.3s ease;
        }
        .send-btn:hover {
            background-color: #C3A3A3;
        }
        .section-card {
            background-color: #F5EBE0;
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }
        #chat-messages::-webkit-scrollbar {
            width: 6px;
        }
        #chat-messages::-webkit-scrollbar-track {
            background: #F5EBE0;
        }
        #chat-messages::-webkit-scrollbar-thumb {
            background-color: #E3D1D1;
            border-radius: 20px;
        }
    </style>
</head>
<body class="w-full">

    <!-- Header & Navigation -->
    <header class="bg-[#FDF8F5]/80 backdrop-blur-sm sticky top-0 z-50 border-b border-[#EADFD7]">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <a href="#" class="text-2xl font-semibold nav-link">Rachel</a>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#ask-rachel" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Ask Rachel</a>
                        <a href="#portfolio" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Portfolio</a>
                        <a href="#teaching" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Teaching Assistant</a>
                        <a href="#hobbies" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Hobbies</a>
                    </div>
                </div>
                <!-- Mobile menu button -->
                <div class="-mr-2 flex md:hidden">
                    <button id="mobile-menu-button" class="inline-flex items-center justify-center p-2 rounded-md text-[#5C4B4B] hover:text-white hover:bg-[#D5B4B4] focus:outline-none">
                        <svg class="h-6 w-6" stroke="currentColor" fill="none" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </nav>
        <!-- Mobile menu -->
        <div id="mobile-menu" class="md:hidden hidden">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#ask-rachel" class="nav-link block px-3 py-2 rounded-md text-base font-medium">Ask Rachel</a>
                <a href="#portfolio" class="nav-link block px-3 py-2 rounded-md text-base font-medium">Portfolio</a>
                <a href="#teaching" class="nav-link block px-3 py-2 rounded-md text-base font-medium">Teaching Assistant</a>
                <a href="#hobbies" class="nav-link block px-3 py-2 rounded-md text-base font-medium">Hobbies</a>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        
        <!-- Ask Rachel Section -->
        <section id="ask-rachel" class="min-h-[90vh] flex flex-col items-center justify-center">
            <div class="chat-container w-full max-w-2xl h-[90vh] md:h-[80vh] flex flex-col rounded-2xl">
                <div class="p-6 border-b border-gray-200/50 text-center">
                    <h1 class="text-2xl font-semibold text-gray-700">Ask Rachel</h1>
                    <p class="text-sm text-gray-500 mt-1">Your Personal AI Knowledge Hub</p>
                </div>
                <div id="chat-messages" class="flex-1 p-6 overflow-y-auto">
                    <div class="flex justify-start mb-4">
                        <div class="bot-msg rounded-lg rounded-bl-none p-3 max-w-md"><p class="text-sm">Hello! How can I help you today?</p></div>
                    </div>
                </div>
                <div class="input-area p-4 rounded-b-2xl">
                    <div class="flex items-center">
                        <input type="text" id="user-input" placeholder="Ask me anything..." class="w-full px-4 py-2 rounded-full border-none focus:ring-2 focus:ring-[#E3D1D1] focus:outline-none transition" autocomplete="off">
                        <button id="send-btn" class="send-btn ml-3 p-2 rounded-full text-white flex-shrink-0">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 20 20" fill="currentColor"><path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z" /></svg>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Portfolio Section -->
        <section id="portfolio" class="py-20">
            <div class="section-card">
                <h2 class="text-3xl font-bold text-center mb-8">Portfolio</h2>
                <div class="text-center text-gray-600">
                    <p>This section is under construction. My project portfolio will be showcased here soon!</p>
                </div>
            </div>
        </section>

        <!-- Teaching Assistant Section -->
        <section id="teaching" class="py-20">
             <div class="section-card">
                <h2 class="text-3xl font-bold text-center mb-8">Teaching Assistant</h2>
                <div class="text-center text-gray-600">
                    <p>This section is under construction. Information about my teaching assistant roles and responsibilities will be available here.</p>
                </div>
            </div>
        </section>

        <!-- Hobbies Section -->
        <section id="hobbies" class="py-20">
             <div class="section-card">
                <h2 class="text-3xl font-bold text-center mb-8">Hobbies</h2>
                <div class="text-center text-gray-600">
                    <p>This section is under construction. Come back later to learn more about my personal interests and hobbies!</p>
                </div>
            </div>
        </section>

    </main>

    <script>
        // --- Chat Logic ---
        const chatMessages = document.getElementById('chat-messages');
        const userInput = document.getElementById('user-input');
        const sendBtn = document.getElementById('send-btn');

        const appendMessage = (sender, message) => {
            const messageWrapper = document.createElement('div');
            const messageBubble = document.createElement('div');
            messageWrapper.classList.add('flex', 'mb-4');
            messageBubble.classList.add('p-3', 'rounded-lg', 'max-w-md');
            if (sender === 'user') {
                messageWrapper.classList.add('justify-end');
                messageBubble.classList.add('user-msg', 'rounded-br-none');
                messageBubble.innerHTML = `<p class="text-sm font-medium">${message}</p>`;
            } else {
                messageWrapper.classList.add('justify-start');
                messageBubble.classList.add('bot-msg', 'rounded-bl-none');
                messageBubble.innerHTML = `<p class="text-sm">${message}</p>`;
            }
            messageWrapper.appendChild(messageBubble);
            chatMessages.appendChild(messageWrapper);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        };

        const handleSendMessage = async () => {
            const question = userInput.value.trim();
            if (!question) return;
            appendMessage('user', question);
            userInput.value = '';

            const thinkingIndicator = document.createElement('div');
            thinkingIndicator.classList.add('flex', 'justify-start', 'mb-4', 'bot-thinking');
            thinkingIndicator.innerHTML = `<div class="bot-msg rounded-lg rounded-bl-none p-3 max-w-md"><p class="text-sm italic text-gray-500">Rachel is thinking...</p></div>`;
            chatMessages.appendChild(thinkingIndicator);
            chatMessages.scrollTop = chatMessages.scrollHeight;

            try {
                const response = await fetch('/ask', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ question: question }),
                });
                chatMessages.removeChild(thinkingIndicator);
                if (!response.ok) throw new Error('Network response was not ok.');
                const data = await response.json();
                const formattedResponse = data.answer.replace(/\\n/g, '<br>');
                appendMessage('bot', formattedResponse);
            } catch (error) {
                console.error('Error:', error);
                const indicator = document.querySelector('.bot-thinking');
                if (indicator) chatMessages.removeChild(indicator);
                appendMessage('bot', 'Sorry, I encountered an error. Please try again.');
            }
        };

        sendBtn.addEventListener('click', handleSendMessage);
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') handleSendMessage();
        });

        // --- Mobile Menu Logic ---
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });
        
        // Close mobile menu when a link is clicked
        document.querySelectorAll('#mobile-menu a').forEach(link => {
            link.addEventListener('click', () => {
                mobileMenu.classList.add('hidden');
            });
        });
    </script>

</body>
</html>
